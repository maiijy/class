<!--
  Created by IntelliJ IDEA.
  User: wuli等等
  Date: 2017/9/29
  Time: 18:33
  To change this template use File | Settings | File Templates.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="../css/style.css" rel="stylesheet">

    <link href="../styles/userInfo.css" rel="stylesheet">
    <link rel="icon" href="../images/favicon.ico">
    <title>个人档案</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li id="index"><a href="../index.html">首页</a></li>
                <li id="post"><a href="postList.html">成果展示</a></li>
                <li id="activityPage"><a href="activity.html">活动展示</a></li>
                <li id="resource"><a href="resource.html">资源下载</a></li>
                <li id="commentPage"><a href="comments.html">讨论区</a></li>
                <li><a href="markdownEditor.html">发布</a></li>
            </ul>

            <ul class="nav navbar-nav navbar-right">

                <li id="userLink" class="dropdown"><a href="javascript:void(0)" class="dropdown-toggle"
                                                      data-toggle="dropdown">username <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="/myArticles">我的文章</a></li>
                        <li><a href="userInfo.html">个人档案</a></li>
                    </ul>
                </li>
                <li><a href="/logout">退出</a></li>
                <li><a href="/login">登录</a></li>
                <li><a href="/register">注册</a></li>

            </ul>

        </div>
        <!--/.nav-collapse -->
    </div>
</nav>
<div class="container" style="margin-top: 60px;">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title base_head">基本信息</h3>
                    <button type="button" class="btn btn-link info_btn" id="info_edit">编辑</button>
                    <button type="button" class="btn btn-link info_btn" id="info_cancel" >取消</button>
                    <button type="button" class="btn btn-link info_btn" id="info_save" >保存</button>
                </div>
                <div class="panel-body" id="userInfo">
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        学期总评
                    </h3>
                </div>
                <table class="table">
                    <th>学年</th><th>学期 </th><th>等级评价</th>
                    <tr><td>2017-2018</td><td>1</td><td>A</td></tr>
                    <tr><td>2016-2017</td><td>2</td><td>A</td></tr>
                </table>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title base_head">
                        计划
                    </h3>
                    <button type="button" class="btn btn-link info_btn" id="plan_add">添加</button>
                </div>
             <div class="panel-body" id="planContainer">
             </div>
            </div>
        </div>
    </div>

</div>
<footer class="footer">
    <div class="footer-bottom">
        <i class="fa fa-copyright"></i> Copyright 2017. 杭州电子科技大学<br>
    </div>
</footer>
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/template.js"></script>
<script type="text/html" id="base_form">
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <label for="f_name" class="col-sm-2 control-label">姓名</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="f_name" value="{{f_name}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_sex" class="col-sm-2 control-label">姓别</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="f_sex" value="{{f_sex}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_stdId" class="col-sm-2 control-label">学号</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="f_stdId" value="{{f_stdId}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_school" class="col-sm-2 control-label">学院</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="f_school" value="{{f_school}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_identity" class="col-sm-2 control-label">身份</label>
            <div class="col-sm-5">
                <select class="form-control" id="f_identity">
                    <option>本科生</option>
                    <option>研究生</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label for="f_birth" class="col-sm-2 control-label">出生日期</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" name="date" id="f_birth" value="{{f_birth}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_phone" class="col-sm-2 control-label">手机号码</label>
            <div class="col-sm-5">
                <input type="text" class="form-control" id="f_phone" value="{{f_phone}}">
            </div>
        </div>
        <div class="form-group">
            <label for="f_description" class="col-sm-2 control-label">个人简介</label>
            <div class="col-sm-8">
                <textarea class="form-control" rows="3" id="f_description">{{f_description}}</textarea>
                <!--<input type="textarea" class="form-control" id="f_description" value="{{f_description}}"> -->
            </div>
        </div>
    </form>
</script>
<script type="text/html" id="base_content">
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">姓名:</div>
            <span id="username">{{username}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">姓别:</div>
            <span id="user_sex">{{user_sex}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">学号:</div>
            <span id="std_id">{{std_id}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">学院:</div>
            <span id="std_school">{{std_school}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">身份:</div>
            <span id="std_identity">{{std_identity}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">出生日期:</div>
            <span id="birth">{{birth}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">手机号码:</div>
            <span id="phone">{{phone}}</span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-offset-1">
            <div class="info_name">个人简介:</div>
            <span id="description">{{description}}</span>
        </div>
    </div>
</script>

<script id="planList" type="text/html">
    <table class="table">
        <th>开始-截止时间</th><th>计划详情</th>
        {{each planList as plan i}}
            <tr>
                    <td>{{plan.date}}</td>
                    <td>{{plan.content}}</td>
            </tr>
        {{/each}}
    </table>
</script>

<script>
    $("#info_save").hide();
    $("#info_cancel").hide();
//初始化
var userInfo = {
    username:"马晓婷",
    user_sex:'女',
    std_id:'15051304',
    std_school:'计算机学院',
    std_identity:'本科生',
    birth:'1997-10-1',
    phone:'18888888888',
    description:'不忘初心，不忘微笑'
};
var base_content = template('base_content', userInfo);
document.getElementById('userInfo').innerHTML = base_content;

//编辑
    $("#info_edit").click(function () {
        getContent();
    });

    //保存按钮
    $("#info_save").click(function () {
        getForm();
    });

    $("#info_cancel").click(function () {
        $("#info_save").toggle();
        $("#info_cancel").toggle();
        $("#info_edit").toggle();

        //从后台获取数据
    });

    //获取计划列表
    var list = {
        planList:[{
            date:'2017.10.22-2017.12.12',
            content:'学习软件设计模式'
        },
            {
                date:'2017.9.12-2017.10.20',
                content:'node.js + Express'
            }
        ]
    };

    var plan = template('planList', list);
    $("#planContainer").html(plan);

    function getContent() {
        $("#info_save").toggle();
        $("#info_cancel").toggle();
        $("#info_edit").toggle();

        var username = $("#username").text();
        var user_sex = $("#user_sex").text();
        var std_id = $("#std_id").text();
        var std_school = $("#std_school").text();
        var std_identity = $("#std_identity").text();
        var birth = $("#birth").text();
        var phone = $("#phone").text();
        var description = $("#description").text();
        var putInfo = {
            f_name:username,
            f_sex:user_sex,
            f_stdId:std_id,
            f_school:std_school,
            f_identity:std_identity,
            f_birth:birth,
            f_phone:phone,
            f_description:description
        };
        var base_form = template('base_form', putInfo);
        document.getElementById('userInfo').innerHTML = base_form;
    }

    function getForm() {
        $("#info_save").toggle();
        $("#info_cancel").toggle();
        $("#info_edit").toggle();

        var f_name = $("#f_name").val();
        var f_sex = $("#f_sex").val();
        var f_stdId = $("#f_stdId").val();
        var f_school = $("#f_school").val();
        var f_identity = $("#f_identity").val();
        var f_birth = $("#f_birth").val();
        var f_phone = $("#f_phone").val();
        var f_description = $("#f_description").val();

        //先把数据发送到后台


        userInfo = {
            username:f_name,
            user_sex:f_sex,
            std_id:f_stdId,
            std_school:f_school,
            std_identity:f_identity,
            birth:f_birth,
            phone:f_phone,
            description:f_description
        };

        var base_content = template('base_content', userInfo);
        document.getElementById('userInfo').innerHTML = base_content;
    }
</script>
</body>
</html>
